apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../apps

namespace: queue-system

# Image configuration - ECR registry
images:
  - name: 061039804626.dkr.ecr.ap-northeast-2.amazonaws.com/queue-api
    newTag: latest
  - name: 061039804626.dkr.ecr.ap-northeast-2.amazonaws.com/queue-manager
    newTag: latest
  - name: 061039804626.dkr.ecr.ap-northeast-2.amazonaws.com/chat-server
    newTag: latest

# ConfigMap generator for environment-specific values
configMapGenerator:
  - name: queue-config
    literals:
      - OTEL_ENDPOINT=http://alloy.observability.svc.cluster.local

generatorOptions:
  disableNameSuffixHash: true

# Replicas configuration
replicas:
  - name: queue-api
    count: 3
  - name: queue-manager
    count: 1
  - name: chat-server
    count: 1

commonLabels:
  environment: production
