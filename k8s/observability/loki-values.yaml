# Loki Helm Values for EKS with S3 Backend
# Install: helm upgrade --install loki grafana/loki -n observability -f loki-values.yaml

deploymentMode: SingleBinary

loki:
  auth_enabled: false
  commonConfig:
    replication_factor: 1
  schemaConfig:
    configs:
      - from: 2024-01-01
        store: tsdb
        object_store: s3
        schema: v13
        index:
          prefix: index_
          period: 24h
  storage:
    type: s3
    s3:
      # Replace with terraform output: loki_s3_bucket
      bucketNames:
        chunks: "<LOKI_S3_BUCKET>"
        ruler: "<LOKI_S3_BUCKET>"
        admin: "<LOKI_S3_BUCKET>"
      region: "ap-northeast-2"
      s3ForcePathStyle: false

singleBinary:
  replicas: 1
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

serviceAccount:
  create: true
  name: loki
  annotations:
    # Replace with terraform output: loki_role_arn
    eks.amazonaws.com/role-arn: "<LOKI_ROLE_ARN>"

test:
  enabled: false

monitoring:
  selfMonitoring:
    enabled: false
  lokiCanary:
    enabled: false
